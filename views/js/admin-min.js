/**
 * 2022 Smart Soft.
 *
 *  @author    Marcin Kubiak
 *  @copyright Smart Soft
 *  @license   Commercial License
 *  International Registered Trademark & Property of Smart Soft
 */

function showHideCronSettings(e){1==e?(document.getElementById("cron_hour").closest(".form-group").classList.remove("reduced-opacity"),document.getElementById("cron_day").closest(".form-group").classList.remove("reduced-opacity"),document.getElementById("cron_week").closest(".form-group").classList.remove("reduced-opacity"),document.getElementById("cron_month").closest(".form-group").classList.remove("reduced-opacity")):(document.getElementById("cron_hour").closest(".form-group").classList.add("reduced-opacity"),document.getElementById("cron_day").closest(".form-group").classList.add("reduced-opacity"),document.getElementById("cron_week").closest(".form-group").classList.add("reduced-opacity"),document.getElementById("cron_month").closest(".form-group").classList.add("reduced-opacity"))}function make_chosen_autocomplete(e,t,o=!1){$("div#"+e+"_chosen .search-field input").keyup(delay(function(){$.ajax({url:t+"&q="+$(this).val(),dataType:"json",success:function(t){var n;t&&$("#"+e+"_chosen .no-results").html('No results match "'+$("#"+e+"_chosen .chosen-choices input").val()+'"'),$.each(t,function(t,c){if($("#"+e+" option").each(function(){this.value==c.value&&(n=!0)}),!n){o?$("#"+e).append("<option value="+c.value+">"+c.caption+" id:"+c.value+"</option>"):$("#"+e).append("<option value="+c.value+">"+c.caption+"</option>");var a=$("#"+e+" .chosen-choices input").val();$("#"+e).trigger("chosen:updated"),$("#"+e+" .chosen-choices input").val(a)}})}})},1e3,e))}function navigateToUrl(e){document.location=document.location.href+"&"+e}function delay(e,t,o){var n=0;return function(){$("#"+o+"_chosen .no-results").html('Getting Data "'+$("#"+o+"_chosen .chosen-choices input").val()+'"');var c=this,a=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(c,a)},t||0)}}function pie_chart_news(e,t){nv.addGraph(function(){var e=nv.models.pieChart().x(function(e){return e.key}).y(function(e){return e.y}).color(d3.scale.category10().range()).donut(!0).showLabels(!1).showLegend(!1);return d3.select("#dash_traffic_chart2 svg").datum(t.data).transition().duration(1200).call(e),nv.utils.windowResize(e.update),e})}$(function(){$(".datetimepicker").datetimepicker({prevText:"",nextText:"",dateFormat:"yy-mm-dd",currentText:"Now",closeText:"Done",ampm:!1,amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"hh:mm:ss tt",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute"});let e=$("#target_customer").val();function t(e,t,o){parseInt(o)===t?e.closest(".form-group").slideDown():e.closest(".form-group").slideUp()}e&&(t($("#groups"),7,e),t($("#ab_day"),5,e),t($("#newsletter_autocomplete_input"),"cart",$("#target_news").val()),$("#dstemplate_form #description").closest(".form-group").hide(),make_chosen_autocomplete("newsletter_autocomplete_input",urlJson+"&action=getNews"),make_chosen_autocomplete("product_autocomplete_input",urlJson+"&action=getProduct",!0)),$("#select_newsletter").on("change",function(e){navigateToUrl(this.value)});let o=$("#target_customer");o.on("change",function(e){var o=$(this).val();t($("#groups"),7,o),t($("#ab_day"),5,o)});let n=$("#target_news");n.on("change",function(){t($("#newsletter_autocomplete_input"),4,this.value)}),n.length&&(n.change(),o.change()),$(".statistics td").removeAttr("onclick");let c=$('input[name="cron"]');c.length&&(c.change(function(){showHideCronSettings($(this).val())}),showHideCronSettings($("#cron_on").is(":checked")))});
